
{% extends "partials/base.html" %}
{% load humanize %}
{% load static %}
{% block content  %}

    <main class="main">

        <!-- Page Title -->
        <div class="page-title">
            <div class="heading">
                <div class="container">
                    <div class="row d-flex justify-content-center text-center">
                    <div class="col-lg-8">
                        <h1 class="heading-title">Agent Profile</h1>
                        <p class="mb-0">
                        Odio et unde deleniti. Deserunt numquam exercitationem. Officiis quo
                        odio sint voluptas consequatur ut a odio voluptatem. Sit dolorum
                        debitis veritatis natus dolores. Quasi ratione sint. Sit quaerat
                        ipsum dolorem.
                        </p>
                    </div>
                    </div>
                </div>
            </div>
            
        </div><!-- End Page Title -->

        <!-- Agent Profile Section -->
        <section id="agent-profile" class="agent-profile section">

            <div class="container" data-aos="fade-up" data-aos-delay="100">

            <!-- Agent Profile Card -->
            <div class="agent-profile-card" data-aos="zoom-in" data-aos-delay="150">
                <div class="profile-background">
                <img src="{{agent.cover_img.url}}" alt="Background" class="profile-bg-image">
                </div>

                <div class="profile-content">
                <div class="agent-avatar">
                    <img src="{{agent.image.url}}" alt="Agent" class="avatar-image">
                    <div class="status-indicator">
                    {% if agent.is_available %}
                        <i class="bi bi-circle-fill"></i>
                        <span>Available</span>
                    {% else %}
                        <i class="bi bi-circle-fill" style="color: red;"></i>
                        <span>Unavailable</span>
                    {% endif %}

                    </div>
                </div>

                <div class="agent-header">
                    <h1 class="agent-name">{{agent.full_name}}</h1>
                    <div class="agent-credentials">
                    <span class="title">Licensed {{agent.agent_type}}</span>
                    <div class="verification-badge">
                        {% if agent.verified %}
                            <i class="bi bi-patch-check-fill"></i>
                            <span>Verified Agent</span>
                        {% endif %}

                    </div>
                    </div>
                    

                    <div class="quick-stats">
                        <div class="quick-stat">
                            
                            <span class="stat-value">{{agent_rating|floatformat:1}}</span>
                            <div>
                                {% for i in "12345" %}
                                    <i class="fas fa-star {% if agent.agent_average_rating >= forloop.counter %}text-warning{% endif %}" style="font-size: 14px;"></i>
                                {% endfor %}
                            </div>
                        </div>
                        <div class="quick-stat">
                            <span class="stat-value">156</span>
                            <span class="stat-label">Properties Sold</span>
                        </div>
                        <div class="quick-stat">
                            <span class="stat-value">{{agent.years_of_exp}}+</span>
                            <span class="stat-label">Years Experience</span>
                        </div>
                        <!-- <div class="quick-stat">
                            <span class="stat-value">{{agent.min_price}} - {{agent.max_price}}</span>
                            <span class="stat-label">Years Experience</span>
                        </div> -->
                    </div>
                </div>
                </div>
            </div>

            <!-- Main Content Grid -->
            <div class="main-content-grid" data-aos="fade-up" data-aos-delay="200">

                <!-- Left Content -->
                <div class="content-main">

                <!-- About Section -->
                <div class="about-section">
                    <h3>Professional Summary</h3>
                    <p>{{agent.desc}}</p>

                    {% if agent.mission %}
                        <div class="highlight-box">
                            <h4>"{{agent.mission}}"</h4>
                        </div>
                    {% endif %}
                </div>

                <!-- Experience Timeline -->
                <!-- <div class="experience-section">
                    <h3>Career Highlights</h3>
                    <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-marker"></div>
                        <div class="timeline-content">
                        <div class="timeline-year">2023</div>
                        <h5>Top 3% Agent Recognition</h5>
                        <p>Recognized as one of the top-performing agents in the metropolitan area with $18M+ in sales volume.</p>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-marker"></div>
                        <div class="timeline-content">
                        <div class="timeline-year">2021</div>
                        <h5>Luxury Market Specialist</h5>
                        <p>Completed advanced certification in luxury property marketing and client relations.</p>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-marker"></div>
                        <div class="timeline-content">
                        <div class="timeline-year">2018</div>
                        <h5>Senior Agent Promotion</h5>
                        <p>Promoted to senior agent position after consistently exceeding sales targets and client satisfaction scores.</p>
                        </div>
                    </div>
                    </div>
                </div> -->



                <!-- Service Areas -->
                <div class="service-areas">
                    <h3>Service Areas &amp; Expertise</h3>
                    <div class="areas-grid">
                        {% for a in agent.agent_specialties.all %}
                            <div class="area-item">
                                <!-- <i class="bi bi-building"></i> -->
                                <div>
                                <h5>{{a.title}}</h5>
                                <p>{{a.about}}</p>
                                </div>
                            </div>
                        {% endfor %}
                        
                    </div>
                </div>

                </div>

                <!-- Right Sidebar -->
                <div class="content-sidebar">

                <!-- Contact Widget -->
                <div class="contact-widget">
                    <h4>Let's Connect</h4>

                    <div class="contact-methods">
                    <a href="tel:{{agent.phone}}" class="contact-method primary">
                        <i class="bi bi-telephone-fill"></i>
                        <div>
                        <span class="method-label">Call Now</span>
                        <span class="method-value">{{agent.phone}}</span>
                        </div>
                    </a>

                    <a href="mailto:{{agent.email}}" class="contact-method">
                        <i class="bi bi-envelope-fill"></i>
                        <div>
                        <span class="method-label">Email</span>
                        <span class="method-value">{{agent.email}}</span>
                        </div>
                    </a>

                    <a href="{{agent.whatsapp}}" class="contact-method">
                        <i class="bi bi-whatsapp"></i>
                        <div>
                        <span class="method-label">WhatsApp</span>
                        <span class="method-value">Quick messaging</span>
                        </div>
                    </a>
                    </div>

                    <div class="social-connect">
                    <h5>Follow Me</h5>
                    <div class="social-links">
                        <!-- <a href="#"><i class="bi bi-linkedin"></i></a> -->
                        <a href="{{agent.instagram}}"><i class="bi bi-instagram"></i></a>
                        <a href="{{agent.facebook}}"><i class="bi bi-facebook"></i></a>
                        <a href="{{agent.twitter}}"><i class="bi bi-twitter-x"></i></a>
                    </div>
                    </div>
                </div>

                <!-- Quick Form -->
                <div class="contact-form">
                    <h4>Quick Inquiry</h4>
                    <form action="" method="POST" class="inquiry-form"> {% csrf_token %}
                        <div class="mb-3">
                            {{form.full_name}}
                                {% if form.full_name.errors %}
                                    <div class="text-danger">
                                        {% for error in form.full_name.errors %}
                                            <small>{{ error }}</small><br>
                                        {% endfor %}
                                    </div>
                                {% endif %}
                        </div>
                        <div class="mb-3">
                            {{form.email}}
                                {% if form.email.errors %}
                                    <div class="text-danger">
                                        {% for error in form.email.errors %}
                                            <small>{{ error }}</small><br>
                                        {% endfor %}
                                    </div>
                                {% endif %}
                        </div>

                        <div class="mb-3">
                            {{form.phone}}
                                {% if form.phone.errors %}
                                    <div class="text-danger">
                                        {% for error in form.phone.errors %}
                                            <small>{{ error }}</small><br>
                                        {% endfor %}
                                    </div>
                                {% endif %}
                        </div>
                
                        <div class="mb-3">
                            {{form.message}}
                                {% if form.message.errors %}
                                    <div class="text-danger">
                                        {% for error in form.message.errors %}
                                            <small>{{ error }}</small><br>
                                        {% endfor %}
                                    </div>
                                {% endif %}
                        </div>



                        <button type="submit" class="btn btn-submit">
                            <i class="bi bi-send"></i>
                            Send Message
                        </button>
                    </form>
                </div>

                
                <br>
                <!-- Office Info -->
                <div class="office-info">
                    <h4>Office Location</h4>
                    <div class="office-details">
                        <div class="office-address">
                            <i class="bi bi-geo-alt-fill"></i>
                            <div>
                            <span>{{agent.office_name}}</span>
                            <span>{{agent.office_address}}</span>
                            </div>
                        </div>
                        <!-- <div class="office-hours">
                            <i class="bi bi-clock-fill"></i>
                            <div>
                            <span>Business Hours</span>
                            <span>Mon - Fri: 9:00 AM - 7:00 PM<br>Weekends: By Appointment</span>
                            </div>
                        </div> -->
                    </div>
                </div>

                </div>
            </div>

            <!-- Performance Metrics -->
            <div class="performance-metrics" data-aos="fade-up" data-aos-delay="300">
                <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-icon">
                    <i class="bi bi-house-door-fill"></i>
                    </div>
                    <div class="metric-data">
                    <span class="metric-number">156</span>
                    <span class="metric-label">Properties Sold</span>
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-icon">
                    <i class="bi bi-currency-dollar"></i>
                    </div>
                    <div class="metric-data">
                    <span class="metric-number">$45M+</span>
                    <span class="metric-label">Total Sales Volume</span>
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-icon">
                    <i class="bi bi-heart-fill"></i>
                    </div>
                    <div class="metric-data">
                    <span class="metric-number">98%</span>
                    <span class="metric-label">Client Satisfaction</span>
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-icon">
                    <i class="bi bi-speedometer2"></i>
                    </div>
                    <div class="metric-data">
                    <span class="metric-number">28</span>
                    <span class="metric-label">Avg. Days on Market</span>
                    </div>
                </div>
                </div>
            </div>

            </div>

        </section>
        <!-- /Agent Profile Section -->


        <!-- Comments -->
        <section id="blog-comments" class="blog-comments section">
            <div class="container" data-aos="fade-up" data-aos-delay="100">
                <div class="blog-comments-4">
                    <div class="comments-header">
                        <h3 class="title">What users are saying about {{agent.full_name}}</h3>
                        <div class="comments-stats">
                            <span class="count" id="comment-count">{{reviews.count|default:'0'}}</span>
                            <span class="label">Comments</span>
                        </div>
                    </div>

                    <div class="comments-container" id="reviews-container">
                        <!-- Comment  -->
                        {% for r in reviews %}
                            <div class="comment-thread">
                                <div class="comment-box">
                                    <div class="comment-wrapper">
                                        <div class="avatar-wrapper">
                                            {% if r.user.profile.image %}
                                                <img src="{{r.user.profile.image.url}}" alt="Avatar" loading="lazy" />
                                            {% else %}
                                                 <img src="{% static 'assets/img/person/default.jpg' %}" alt="Avatar" loading="lazy" />
                                            {% endif %}
                                            <span class="status-indicator"></span>
                                        </div>

                                        <div class="comment-content">
                                            <div class="comment-header">
                                                <div class="user-info">
                                                    <h4>{{r.user.profile.full_name}}</h4>
                                                    <span class="time-badge pt-1 pb-2">
                                                        
                                                        {% for i in "12345" %}
                                                            <i class="fas fa-star" {% if r.rating >= forloop.counter %}style="color: gold;"{% endif %}></i>
                                                        {% endfor %}
                                                    </span>
                                                    <span class="time-badge">
                                                        <i class="bi bi-clock"></i>
                                                        {{r.date}}
                                                    </span>
                                                    
                                                </div>
                                                
                                            </div>

                                            <div class="comment-body">
                                                <p>{{r.review}}</p>
                                            </div>

                                            
                                        </div>
                                    </div>
                                </div>

                                
                            </div>
                        {% endfor %}


                        
                    </div>
                </div>
            </div>
        </section> 
        <!-- /Blog Comments Section -->


        <section id="blog-comment-form" class="blog-comment-form section">
            <div class="container" data-aos="fade-up" data-aos-delay="100">
                {% if review_exist %}
                    <input type="hidden">
                {% else %}
                    <form method="POST" action="{% url 'agent:add_comment' agent.agent_id %}" role="form" id="review-form"> {% csrf_token %}
                        <div class="form-header">
                            <h3>Leave a Review</h3>
                            <p>Your email address will not be published.</p>
                        </div>


                            <div class="col-12">
                                <div class="input-group">
                                    <label for="comment">Your Comment *</label>
                                    <textarea name="comment" id="comment" rows="5" placeholder="Write your thoughts here..." required=""></textarea>
                                    
                                </div>
                            </div>

                            <div class="col-12">
                                <div class="form-group">
                                    <label>Rating *</label>  <br>
                                    <select name="rating" id="rating" class="form-control mt-1 mb-3" required>
                                        <option value="1">★☆☆☆☆</option>
                                        <option value="2">★★☆☆☆</option>
                                        <option value="3">★★★☆☆</option>
                                        <option value="4">★★★★☆</option>
                                        <option value="5">★★★★★</option>
                                    </select>
                                    
                                </div>
                            </div>


                            <div class="col-12 text-center">
                                <button type="submit">Post Comment</button>
                            </div>
                    
                    </form>
                {% endif %}
                
            </div>
        </section>




    </main>

{% endblock %}
